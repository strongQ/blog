import{C as d,l as t,P as r,A as m,D as _,F as h,G as f,M as g,V as E,T as M,d as v,H as P}from"./chunks/XYZ.00767a0c.js";import{O as T}from"./chunks/OSM.c6e7868c.js";import{d as q,h as c,j as w,o as i,c as C,k as F,_ as O,E as j,J as y,w as S,U as A}from"./chunks/framework.83a19234.js";const p="projection",D="coordinateFormat";class b extends d{constructor(s){s=s||{};const n=document.createElement("div");n.className=s.className!==void 0?s.className:"ol-mouse-position",super({element:n,render:s.render,target:s.target}),this.on,this.once,this.un,this.addChangeListener(p,this.handleProjectionChanged_),s.coordinateFormat&&this.setCoordinateFormat(s.coordinateFormat),s.projection&&this.setProjection(s.projection),this.renderOnMouseOut_=s.placeholder!==void 0,this.placeholder_=this.renderOnMouseOut_?s.placeholder:"&#160;",this.renderedHTML_=n.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=s.wrapX!==!1}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(D)}getProjection(){return this.get(p)}handleMouseMove(s){const n=this.getMap();this.updateHTML_(n.getEventPixel(s))}handleMouseOut(s){this.updateHTML_(null)}setMap(s){if(super.setMap(s),s){const n=s.getViewport();this.listenerKeys.push(t(n,r.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(t(n,r.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(s){this.set(D,s)}setProjection(s){this.set(p,m(s))}updateHTML_(s){let n=this.placeholder_;if(s&&this.mapProjection_){if(!this.transform_){const l=this.getProjection();l?this.transform_=_(this.mapProjection_,l):this.transform_=h}const a=this.getMap().getCoordinateFromPixelInternal(s);if(a){if(this.transform_(a,a),this.wrapX_){const u=this.getProjection()||this.mapProjection_;f(a,u)}const l=this.getCoordinateFormat();l?n=l(a):n=a.toString()}}(!this.renderedHTML_||n!==this.renderedHTML_)&&(this.element.innerHTML=n,this.renderedHTML_=n)}render(s){const n=s.frameState;n?this.mapProjection_!=n.viewState.projection&&(this.mapProjection_=n.viewState.projection,this.transform_=null):this.mapProjection_=null}}const B=b,x={class:"map-example"},L=q({__name:"mousePosition",setup(e){const s=c(),n=c();return w(()=>{new g({view:new E({center:[12579156,3274244],zoom:12}),layers:[new M({source:new T})],controls:v({attributionOptions:{collapsible:!0}}).extend([new B({coordinateFormat:P(3),projection:"EPSG:4326",target:n.value})]),target:s.value})}),(o,a)=>(i(),C("div",x,[F("div",{ref_key:"map",ref:s,class:"map"},null,512),F("div",{ref_key:"position",ref:n,class:"position"},null,512)]))}});const V=O(L,[["__scopeId","data-v-eed7b840"]]),N=A("",2),k=A("",1),G=JSON.parse('{"title":"openlayers 鼠标位置","description":"","frontmatter":{},"headers":[],"relativePath":"docs/框架/openlayers示例/地图控件/鼠标位置.md","filePath":"docs/框架/openlayers示例/地图控件/鼠标位置.md","lastUpdated":1701307205000}'),H={name:"docs/框架/openlayers示例/地图控件/鼠标位置.md"},J=Object.assign(H,{setup(e){return(s,n)=>{const o=j("ClientOnly");return i(),C("div",null,[N,y(o,null,{default:S(()=>[y(V)]),_:1}),k])}}});export{G as __pageData,J as default};
